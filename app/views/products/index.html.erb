<%= form_tag products_path, :method => "get" do %>
    <%= label_tag :search %>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search" %>
<% end %>
<%= link_to "Show Cart", show_cart_path%>

<div class="row products-container">
    <%= render 'layouts/sidebar'%>
    <div class="main-content col-md-10 mt-5">
        <div class="container">

            <table class="table table-striped">
                <tr>
                    <th>Title</th>
                    <th>Image</th>
                    <th>Description</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th>Brand</th>
                    <th>Store</th>
                    <th colspan="3">Actions</th>
                </tr>

                <% if ! @products.empty? %>
                    <% @products.each do |product| %>
                        <tr>
                            <td><%= product.title %></td>
                            <td><%= (product.image.attached?) ? image_tag(product.image, size: "100x100") : "No Image" %></td>
                            <td><%= product.description %></td>
                            <td><%= product.quantity %></td>
                            <td><%= product.price %></td>
                            <td><%= product.category.name %></td>
                            <td><%= product.brand.name %></td>
                            <td><%= product.store.name %></td>
                            <td><%= link_to "Show", product_path(product.id) %></td>
                            <td><%= link_to "Edit", edit_product_path(product.id) %></td>
                            <td><%= link_to "Add To Cart", add_to_cart_path(product.id)%></td>
                            <td><%= button_to 'Delete', product_path(product.id), method: :delete, data: { confirm: 'Are you sure you want to delete this product?' } %> </td>
                        </tr>
                    <% end %>
                <% else %>
                    <td colspan="11" style="text-align: center">No Products Found</td>
                <% end %>
            </table>
            <div>
                <%= link_to "New Product", new_product_path %>
            </div>
        </div>
    </div>
</div>